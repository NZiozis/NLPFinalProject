Preheat the oven to 400˚F (200˚C).
In a large pot of salted boiling water, blanch the green beans for 3 minutes, until tender and bright green. Drain and transfer to a 9x13-inch (23x33 cm) baking dish.
Melt 4 tablespoons of butter in a large pan over high heat. Add the onions and cook for 8 minutes, until softened and translucent.
Add the mushrooms and cook for 5 minutes, until browned. Add the garlic and cook just until fragrant, about 1 minute.
Transfer the vegetable mixture to the casserole dish with the green beans. Wipe out the pan.
Melt the remaining 4 tablespoons of butter in the same pan. Add the flour and stir to combine. Cook until a golden brown roux forms, for 5 minutes.
Add the milk, heavy cream, salt, pepper, chicken broth, and Parmesan cheese, and stir to combine. Reduce the heat to medium-low and cook until the sauce is thickened, about 10 minutes.
Pour the sauce evenly over the vegetables in the casserole dish and toss until everything is well coated. Cover with foil.
Bake for 20 minutes, then remove the foil and bake for another 10 minutes.
Top the casserole with the fried onions, then serve.
Enjoy!
